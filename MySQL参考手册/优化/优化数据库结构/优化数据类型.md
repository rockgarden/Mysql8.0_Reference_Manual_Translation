# 优化MySQL数据类型

## 优化数值数据

Numeric

对于可以表示为字符串或数字的唯一 ID 或其他值，首选数字列而不是字符串列。 由于大数值可以存储在比相应字符串更少的字节中，因此传输和比较它们更快并且占用更少的内存。

如果您使用数字数据，在许多情况下，从数据库（使用实时连接）访问信息比访问文本文件要快。 数据库中的信息可能以比文本文件更紧凑的格式存储，因此访问它涉及更少的磁盘访问。 您还可以在应用程序中保存代码，因为您可以避免解析文本文件来查找行和列边界。

## 优化字符和字符串类型

Character and String

对于字符和字符串列，请遵循以下准则：

- 当您不需要特定于语言的整理功能时，使用 binary collation 顺序进行快速比较和排序操作。您可以使用 BINARY 运算符在特定查询中使用二进制排序规则。

- 在比较不同列的值时，尽可能使用相同的字符集和排序规则声明这些列，以避免在运行查询时进行字符串转换。

- 对于大小小于 8KB 的列值，请使用二进制 VARCHAR 而不是 BLOB。 GROUP BY 和 ORDER BY 子句可以生成临时表，如果原始表不包含任何 BLOB 列，这些临时表可以使用 MEMORY 存储引擎。

- 如果表包含字符串列，例如名称和地址，但许多查询不检索这些列，请考虑将字符串列拆分到单独的表中，并在必要时使用带有外键的连接查询。当 MySQL 从行中检索任何值时，它会读取包含该行的所有列（可能还有其他相邻行）的数据块。保持每行较小，只包含最常用的列，可以让更多的行适合每个数据块。这种紧凑的表减少了常见查询的磁盘 I/O 和内存使用。

- 当您使用随机生成的值作为 InnoDB 表中的主键时，如果可能，请在其前面加上升序值，例如当前日期和时间。当连续的主值物理存储在彼此附近时，InnoDB 可以更快地插入和检索它们。

## 针对 BLOB 类型进行优化

存储包含文本数据的大型 blob 时，请考虑先对其进行压缩。当整个表被 InnoDB 或 MyISAM 压缩时，不要使用这种技术。

对于具有多个列的表，为了减少不使用 BLOB 列的查询的内存需求，请考虑将 BLOB 列拆分为单独的表，并在需要时使用连接查询引用它。

由于检索和显示 BLOB 值的性能要求可能与其他数据类型非常不同，因此您可以将特定于 BLOB 的表放在不同的存储设备甚至单独的数据库实例上。例如，检索 BLOB 可能需要大的顺序磁盘读取，这更适合传统硬盘驱动器而不是 SSD 设备。

二进制 VARCHAR 列有时比等效的 BLOB 列更可取的原因。

您可以将列值的散列存储在单独的列中，索引该列，然后在查询中测试散列值，而不是针对非常长的文本字符串测试相等性。 （使用 MD5() 或 CRC32() 函数来产生哈希值。）由于哈希函数可以为不同的输入产生重复的结果，你仍然在查询中包含一个子句 `AND blob_column = long_string_value` 以防止错误匹配；性能优势来自于散列值的更小、更容易扫描的索引。

# 比较函数和运算符

- [ ] [Comparison Functions and Operators](https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html)

| Name                    | 说明              |
|-------------------------|-----------------|
| >                       | 大于运算符           |
| >=                      | 大于或等于运算符        |
| <                       | 小于运算符           |
| <>, !=                  | 不等于运算符          |
| <=                      | 小于或等于运算符        |
| <=>                     | NULL 安全等于运算符    |
| =                       | 相等运算符           |
| BETWEEN ... AND ...     | 一个值是否在一个值范围内    |
| COALESCE()              | 返回第一个非空参数       |
| GREATEST()              | 返回最大参数          |
| IN()                    | 一个值是否在一个值集合内    |
| INTERVAL()              | 返回小于第一个参数的参数的索引 |
| IS                      | 根据布尔值测试数值       |
| IS NOT                  | 根据布尔值测试数值       |
| IS NOT NULL             | NOT NULL 值测试    |
| IS NULL                 | NULL 值测试        |
| ISNULL()                | 测试参数是否为 NULL    |
| LEAST()                 | 返回最小参数          |
| LIKE                    | 简单模式匹配          |
| NOT BETWEEN ... AND ... | 数值是否不在数值范围内     |
| NOT IN()                | 数值是否不在数值集合内     |
| NOT LIKE                | 简单模式匹配的否定       |
| STRCMP()                | 比较两个字符串         |

比较操作的结果是 1（真）、0（假）或 NULL。这些操作对数字和字符串都有效。字符串会根据需要自动转换为数字，数字也会自动转换为字符串。

以下关系比较运算符不仅可用于比较标量操作数，还可用于比较行操作数：

`=  >  <  >=  <=  <>  !=`

本节后面将详细介绍这些操作符如何与行操作数配合使用。有关行子查询中行比较的其他示例，请参见第 13.2.15.5 节 "行子查询"。

本节中有些函数的返回值不是 1 (TRUE)、0 (FALSE) 或 NULL。第 12.3 节 "表达式求值中的类型转换" 介绍了这些函数和类似函数为确定返回值而执行的比较操作规则。

> 注释
  在以前版本的 MySQL 中，当评估包含 LEAST() 或 GREATEST() 的表达式时，服务器会尝试猜测使用函数的上下文，并将函数参数强制转换为整个表达式的数据类型。例如，LEAST("11", "45", "2")的参数将作为字符串进行评估和排序，因此该表达式将返回 "11"。在 MySQL 8.0.3 及更早版本中，当评估表达式 LEAST("11", "45", "2") + 0 时，服务器会在排序前将参数转换为整数（预计结果会加上整数 0），因此返回 2。
  从 MySQL 8.0.4 开始，服务器不再尝试以这种方式推断上下文。取而代之的是，使用所提供的参数执行函数，并对一个或多个参数执行数据类型转换（如果且仅当它们不全是相同类型时）。现在，使用返回值的表达式强制执行的任何类型强制都会在函数执行后进行。这意味着，在 MySQL 8.0.4 及更高版本中，LEAST("11", "45", "2") + 0 的值为 "11" + 0，因此为整数 11。（错误 #83895，错误 #25123839）

要将值转换为特定类型以便进行比较，可以使用 CAST() 函数。字符串值可以使用 CONVERT() 转换为不同的字符集。请参见第 12.10 节 "转换函数和操作符"。

默认情况下，字符串比较不区分大小写，并使用当前字符集。默认值为 utf8mb4。

- GREATEST(value1,value2,...)

    对于两个或多个参数，返回最大（最大值）参数。使用与 LEAST() 相同的规则比较参数。

    ```sql
    mysql> SELECT GREATEST(2,0);
            -> 2
    mysql> SELECT GREATEST(34.0,3.0,5.0,767.0);
            -> 767.0
    mysql> SELECT GREATEST('B','A','C');
            -> 'C'
    ```

    如果任何参数为 NULL，GREATEST() 返回 NULL。

- LEAST(value1,value2,...)

  对于两个或多个参数，返回最小（最小值）参数。参数比较规则如下：

  - 如果任何参数为 NULL，则结果为 NULL。无需比较。
  - 如果所有参数都是整数值，则以整数值进行比较。
  - 如果至少一个参数是双精度值，则将它们作为双精度值进行比较。否则，如果至少有一个参数是十进制值，则以十进制值进行比较。
  - 如果参数由数字和字符串混合组成，则按字符串进行比较。
  - 如果任何参数是非二进制（字符）字符串，则以非二进制字符串进行比较。
  - 在所有其他情况下，参数将作为二进制字符串进行比较。

  LEAST() 的返回类型是比较参数类型的集合类型。

    ```sql
    mysql> SELECT LEAST(2,0);
            -> 0
    mysql> SELECT LEAST(34.0,3.0,5.0,767.0);
            -> 3.0
    mysql> SELECT LEAST('B','A','C');
            -> 'A'
    ```

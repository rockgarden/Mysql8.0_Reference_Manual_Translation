# MySQL词汇表

## B

### B Tree

一种在数据库索引中流行的树数据结构。该结构始终保持排序，从而可以快速查找精确匹配（等于运算符）和范围（例如，大于、小于和 BETWEEN 运算符）。这种类型的索引适用于大多数存储引擎，例如 InnoDB 和 MyISAM。

因为 B-tree 节点可以有很多子节点，所以 B-tree 与二叉树不同，二叉树每个节点限制为 2 个子节点。

与哈希索引对比，后者仅在 MEMORY 存储引擎中可用。 MEMORY 存储引擎也可以使用 B-tree 索引，如果某些查询使用范围运算符，则应为 MEMORY 表选择 B-tree 索引。

术语 B-tree 的使用旨在作为索引设计的一般类别的参考。由于经典 B-tree 设计中不存在的复杂性，MySQL 存储引擎使用的 B-tree 结构可能被视为变体。有关相关信息，请参阅 [MySQL Internals Manual](https://dev.mysql.com/doc/internals/en/index.html) 的 InnoDB Page Structure [Fil Header](https://dev.mysql.com/doc/internals/en/innodb-fil-header.html) 部分。

## C

### cardinality

基数
表列中不同值的数量。当查询引用具有关联索引的列时，每列的基数会影响最有效的访问方法。例如，对于具有唯一约束的列，不同值的数量等于表中的行数。如果一个表有一百万行，但特定列只有 10 个不同的值，则每个值（平均）出现 100,000 次。 SELECT c1 FROM t1 WHERE c1 = 50 等查询因此可能会返回 1 行或大量行，并且数据库服务器可能会根据 c1 的基数以不同方式处理查询。

如果列中的值分布非常不均匀，则基数可能不是确定最佳查询计划的好方法。例如，SELECT c1 FROM t1 WHERE c1 = x;当 x=50 时可能返回 1 行，当 x=30 时可能返回一百万行。在这种情况下，您可能需要使用索引提示来传递有关哪种查找方法对特定查询更有效的建议。

基数也可以应用于多个列中存在的不同值的数量，例如在复合索引中。

### change buffer

更改缓冲区
一种特殊的数据结构，用于记录二级索引中页面的更改。这些值可能来自 SQL INSERT、UPDATE 或 DELETE 语句 (DML)。涉及更改缓冲区的一组功能统称为更改缓冲，包括插入缓冲、删除缓冲和清除缓冲。

仅当二级索引中的相关页面不在缓冲池中时，更改才会记录在更改缓冲区中。当相关索引页被带入缓冲池而相关更改仍在更改缓冲区中时，该页的更改将使用更改缓冲区中的数据应用到缓冲池中（合并）。在系统大部分空闲或缓慢关闭期间运行的清除操作会定期将新索引页写入磁盘。与将每个值立即写入磁盘相比，清除操作可以更有效地为一系列索引值写入磁盘块。

物理上，更改缓冲区是系统表空间的一部分，因此索引更改在数据库重新启动时保持缓冲。仅当页面由于某些其他读取操作而被带入缓冲池时，才会应用（合并）更改。

存储在更改缓冲区中的数据种类和数量由 innodb_change_buffering 和 innodb_change_buffer_max_size 配置选项控制。要查看有关更改缓冲区中当前数据的信息，请发出 SHOW ENGINE INNODB STATUS 命令。

以前称为插入缓冲区。

### covering index

覆盖索引

包含查询检索到的所有列的索引。 查询不是使用索引值作为指针来查找完整的表行，而是从索引结构中返回值，从而节省磁盘 I/O。 InnoDB 可以将此优化技术应用于比 MyISAM 更多的索引，因为 InnoDB 二级索引还包括主键列。 InnoDB 不能将此技术应用于对事务修改的表的查询，直到该事务结束。

给定正确的查询，任何列索引或复合索引都可以充当覆盖索引。 设计您的索引和查询以尽可能利用这种优化技术。

## crash recovery

崩溃恢复
崩溃后再次启动 MySQL 时发生的清理活动。 对于 InnoDB 表，使用重做日志中的数据重播来自不完整事务的更改。 崩溃前提交但尚未写入数据文件的更改将从双写缓冲区中重建。 当数据库正常关闭时，这种类型的活动在关闭期间由清除操作执行。

在正常操作期间，提交的数据可以在更改缓冲区中存储一段时间，然后再写入数据文件。 在保持数据文件最新（这会在正常操作期间引入性能开销）和缓冲数据（这会使关机和崩溃恢复需要更长的时间）之间总是需要权衡取舍。

## F

### FULLTEXT index

全文索引
MySQL全文搜索机制中保存搜索索引的一种特殊索引。 表示列值中的单词，省略任何指定为停用词的单词。 最初，仅适用于 MyISAM 表。 从 MySQL 5.6.4 开始，它也可用于 InnoDB 表。

## H

### hash Index

哈希索引
一种索引类型，用于使用相等运算符而不是范围运算符（例如大于或 BETWEEN）的查询。 它可用于 MEMORY 表。 尽管由于历史原因哈希索引是 MEMORY 表的默认值，但该存储引擎还支持 B 树索引，这通常是通用查询的更好选择。

MySQL 包括这种索引类型的一个变体，即自适应哈希索引，如果需要，它会根据运行时条件为 InnoDB 表自动构建。

## I

### isolation level

隔离级别
数据库处理的基础之一。 Isolation 是缩写 ACID 中的 I；隔离级别是在多个事务同时进行更改和执行查询时微调性能与结果的可靠性、一致性和可再现性之间的平衡的设置。

从最高的一致性和保护到最低，InnoDB 支持的隔离级别是：SERIALIZABLE、REPEATABLE READ、READ COMMITTED 和 READ UNCOMMITTED。

使用 InnoDB 表，许多用户可以为所有操作保持默认隔离级别（REPEATABLE READ）。专家用户可能会选择 READ COMMITTED 级别，因为他们通过 OLTP 处理推动可扩展性的界限，或者在轻微不一致不会影响大量数据的聚合结果的数据仓库操作期间。边缘的级别（SERIALIZABLE 和 READ UNCOMMITTED）将处理行为改变到很少使用的程度。

## M

### multiversion concurrency control

请参阅 MVCC。

### mutex

互斥体
“互斥变量”的非正式缩写。 （互斥锁本身是“互斥”的缩写。）InnoDB 用来表示和强制对内部内存数据结构执行独占访问锁的低级对象。一旦获得锁，任何其他进程、线程等都无法获得相同的锁。与 rw-locks 相比，InnoDB 使用它来表示和强制对内部内存数据结构进行共享访问锁。互斥锁和读写锁统称为锁存器。

### MVCC

“多版本并发控制”的缩写。这种技术让具有特定隔离级别的 InnoDB 事务执行一致的读取操作；也就是说，查询正在被其他事务更新的行，并查看这些更新发生之前的值。这是一种提高并发性的强大技术，它允许查询继续进行而无需等待其他事务持有的锁。

这种技术在数据库世界中并不普遍。其他一些数据库产品和一些其他 MySQL 存储引擎不支持它。

## P

### physical backup

物理备份
复制实际数据文件的备份。 例如，MySQL Enterprise Backup 产品的 mysqlbackup 命令会生成物理备份，因为它的输出包含可以被 mysqld 服务器直接使用的数据文件，从而导致更快的恢复操作。 与逻辑备份对比。

### purge

清除
由一个或多个单独的后台线程（由 innodb_purge_threads 控制）执行的一种垃圾收集，该线程定期运行。 从历史列表中清除解析和处理撤消日志页面，以删除标记为删除（由先前的 DELETE 语句）并且不再需要 MVCC 或回滚的聚集和二级索引记录。 清除处理后从历史列表中释放撤消日志页面。

## R

### redo log

重做日志
崩溃恢复期间使用的基于磁盘的数据结构，用于纠正由不完整事务写入的数据。在正常操作期间，它对更改 InnoDB 表数据的请求进行编码，这些请求来自 SQL 语句或通过 NoSQL 接口进行的低级 API 调用。在意外关闭之前未完成更新数据文件的修改将自动重播。

重做日志在物理上表示为一组文件，通常命名为 ib_logfile0 和 ib_logfile1。重做日志中的数据根据​​受影响的记录进行编码；这些数据统称为重做。数据通过重做日志的通道由不断增加的 LSN 值表示。在 MySQL 5.6.3 中，重做日志最大大小的原始 4GB 限制提高到 512GB。

重做日志的磁盘布局受配置选项 innodb_log_file_size、innodb_log_group_home_dir 和（很少）innodb_log_files_in_group 影响。重做日志操作的性能也受到日志缓冲区的影响，该缓冲区由 innodb_log_buffer_size 配置选项控制。

### rollback

回滚
结束事务的 SQL 语句，撤消事务所做的任何更改。 它与提交相反，它使事务中所做的任何更改永久化。

默认情况下，MySQL 使用自动提交设置，它会在每个 SQL 语句之后自动发出提交。 您必须先更改此设置，然后才能使用回滚技术。

### R-tree

一种树形数据结构，用于对地理坐标、矩形或多边形等多维数据进行空间索引。

## S

### selectivity

选择性
数据分布的一种属性，列中不同值的数量（其基数）除以表中的记录数。 高选择性意味着列值相对唯一，并且可以通过索引高效检索。 如果您（或查询优化器）可以预测 WHERE 子句中的测试仅匹配表中的少量（或比例）行，则如果首先使用索引评估该测试，则整体查询往往是有效的。

### system tablespace

系统表空间
一个或多个数据文件（ibdata 文件），其中包含 InnoDB 相关对象的元数据，以及更改缓冲区和双写缓冲区的存储区域。如果表是在系统表空间而不是 file-per-table 或通用表空间中创建的，它还可能包含 InnoDB 表的表和索引数据。系统表空间中的数据和元数据适用于 MySQL 实例中的所有数据库。

在 MySQL 5.6.7 之前，默认将所有 InnoDB 表和索引保留在系统表空间内，这通常会导致该文件变得非常大。因为系统表空间从不收缩，如果加载大量临时数据然后删除，可能会出现存储问题。在 MySQL 8.0 中，默认为 file-per-table 模式，其中每个表及其关联的索引都存储在单独的 .ibd 文件中。此默认设置使使用依赖于 DYNAMIC 和 COMPRESSED 行格式的 InnoDB 功能变得更加容易，例如表压缩、页外列的高效存储和大索引键前缀。

将所有表数据保存在系统表空间或单独的 .ibd 文件中通常会对存储管理产生影响。 MySQL Enterprise Backup 产品可能会备份一小组大文件或许多较小的文件。在具有数千个表的系统上，处理数千个 .ibd 文件的文件系统操作可能会导致瓶颈。

InnoDB 在 MySQL 5.7.6 中引入了通用表空间，也由 .ibd 文件表示。通用表空间是使用 CREATE TABLESPACE 语法创建的共享表空间。它们可以在数据目录之外创建，能够保存多个表，并支持所有行格式的表。

## T

### tablespace

表空间
一个数据文件，可以保存一个或多个 InnoDB 表和相关索引的数据。

系统表空间包含 InnoDB 数据字典，在 MySQL 5.6 之前默认保存所有其他 InnoDB 表。

在 MySQL 5.6 及更高版本中默认启用的 [innodb_file_per_table](https://dev.mysql.com/doc/refman/8.0/en/innodb-parameters.html#sysvar_innodb_file_per_table) 选项允许在自己的表空间中创建表。 File-per-table 表空间支持有效存储页外列、表压缩和可传输表空间等功能。 有关详细信息，请参阅[第 15.6.3.2 节，“File-Per-Table 表空间”](https://dev.mysql.com/doc/refman/8.0/en/innodb-file-per-table-tablespaces.html)。

InnoDB 在 MySQL 5.7.6 中引入了通用表空间。 通用表空间是使用 [CREATE TABLESPACE](https://dev.mysql.com/doc/refman/8.0/en/create-tablespace.html) 语法创建的共享表空间。 它们可以在 MySQL 数据目录之外创建，能够保存多个表，并支持所有行格式的表。

MySQL NDB Cluster 还将其表分组到表空间中。 有关详细信息，请参阅[第 23.6.10.1 节，“NDB Cluster 磁盘数据对象”](https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-disk-data-objects.html)。

### transaction

事务是可以提交或回滚的原子工作单元。 当一个事务对数据库进行多次更改时，要么在事务提交时所有更改都成功，要么在事务回滚时撤消所有更改。

由 InnoDB 实现的数据库事务具有由缩写词 ACID 统称为的属性，用于原子性、一致性、隔离性和持久性。
